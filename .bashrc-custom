#if ! [ "$SSH_TTY" ] ; then
#    return
#fi
    
export EDITOR="vim"
set -o vi

function ns {
  local cur_dir="$HOME/tmp/scratch/current"
  local new_dir="$HOME/tmp/scratch/`date +'%s'`"

  mv $cur_dir $new_dir
  mkdir -p $cur_dir
  rm ~/scratch
  ln -s $cur_dir ~/scratch 
  cd ~/scratch
  echo "New scratch dir ready"
}

# autojump
if [[ $OSTYPE =~ ^darwin ]]; then
  [[ -s `brew --prefix`/etc/autojump.sh ]] && . `brew --prefix`/etc/autojump.sh
  export PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin
  alias airport='sudo /System/Library/PrivateFrameworks/Apple80211.framework/Resources/airport'
fi

keychain $(for x in sonos github home;
             do echo $HOME/.keys/*$x | awk '{print $NF}';
           done)
source $HOME/.keychain/$(hostname)-sh

export LANG=en_US.utf8

eval $(dircolors ~/.dircolors)

grep1() { awk -v pattern="${1:?pattern is empty}" 'NR==1 || $0~pattern' "${2:?filename is empty}"; }

if [ -f $HOME/.bashrc-sonos ]; then
    source $HOME/.bashrc-sonos
fi

export JAVA_HOME=/usr/lib/jvm/default-java

set -o vi
bind '"\e[A": history-search-backward'
bind '"\e[B": history-search-forward'

export PATH=$PATH:$HOME/.bin
alias xpra="/Applications/Xpra.app/Contents/MacOS/Xpra"
export LANGUAGE=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
export LC_TYPE=en_US.UTF-8

export PATH=$HOME/.bin:$PATH
export EDITOR=vim
