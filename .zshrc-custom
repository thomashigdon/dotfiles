export EDITOR="vim"

# vi style incremental search
bindkey '^r' history-incremental-search-backward
bindkey '^s' history-incremental-search-forward
bindkey '^p' history-search-backward
bindkey '^n' history-search-forward

function ns {
  local cur_dir="$HOME/tmp/scratch/current"
  local new_dir="$HOME/tmp/scratch/`date +'%s'`"

  mv $cur_dir $new_dir
  mkdir -p $cur_dir
  rm ~/scratch
  ln -s $cur_dir ~/scratch 
  cd ~/scratch
  echo "New scratch dir ready"
}

# autojump
if [[ $OSTYPE =~ ^darwin ]]; then
  [[ -s `brew --prefix`/etc/autojump.sh ]] && . `brew --prefix`/etc/autojump.sh
fi

keychain $(for x in internal external deployed github;
             do echo $HOME/.keys/*$x | awk '{print $NF}';
           done)
source $HOME/.keychain/$(hostname)-sh

export LANG=en_US.utf8

setopt ignoreeof

setopt hist_ignore_all_dups

touch $HOME/.Xdbus
chmod 600 $HOME/.Xdbus
env | grep DBUS_SESSION_BUS_ADDRESS > $HOME/.Xdbus
echo 'export DBUS_SESSION_BUS_ADDRESS' >> $HOME/.Xdbus
